<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>CogniHub - Showcase</title>

  <link rel="icon" href="/static/favicon.ico" />
  <link rel="stylesheet" href="/static/styles.css" />
</head>

<body>
  <div class="showcase">
    <header class="showcase-header">
      <h1>CogniHub</h1>
      <p>Local-first AI chat and RAG assistant</p>
    </header>

    <main class="showcase-main">
      <div class="showcase-card">
        <h2>Features</h2>
        <ul>
          <li>Private, local AI conversations</li>
          <li>Document search and retrieval (RAG)</li>
          <li>Web page scraping and research</li>
          <li>No data sent to external servers</li>
          <li>Fast, offline capabilities</li>
        </ul>
      </div>

      <div class="showcase-card">
        <h2>Service Status</h2>
        <div id="status">
          <p>Checking services...</p>
        </div>
      </div>

      <div class="showcase-actions">
        <button id="tryBtn" class="btn primary" disabled>Try CogniHub</button>
        <p id="tryHint">Services must be running to access the full dashboard.</p>
      </div>
    </main>
  </div>

  <script>
    async function checkStatus() {
      try {
        const res = await fetch('/health');
        const data = await res.json();
        const ollama = data.services?.ollama;
        const statusDiv = document.getElementById('status');
        const tryBtn = document.getElementById('tryBtn');
        const tryHint = document.getElementById('tryHint');

        if (ollama?.ok) {
          statusDiv.innerHTML = '<p style="color: var(--ok);">✓ All services running</p>';
          tryBtn.disabled = false;
          tryHint.textContent = 'Ready to use!';
        } else {
          statusDiv.innerHTML = '<p style="color: var(--warn);">⚠ Some services not available</p>';
          tryBtn.disabled = true;
          tryHint.textContent = 'Please start Ollama or other services.';
        }
      } catch (e) {
        document.getElementById('status').innerHTML = '<p style="color: var(--danger);">✗ Unable to check status</p>';
        document.getElementById('tryBtn').disabled = true;
      }
    }

    document.getElementById('tryBtn').addEventListener('click', () => {
      window.location.href = '/dashboard';
    });

    checkStatus();
  </script>
</body>
</html>