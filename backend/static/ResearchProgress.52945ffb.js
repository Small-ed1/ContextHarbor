var e=globalThis.parcelRequire10c2;(0,e.register)("5x4ke",function(n,r){function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(n.exports,"__esModule",{value:!0}),n.exports.default=void 0;var a=s(e("acw62"));function s(e,n){if("function"==typeof WeakMap)var r=new WeakMap,a=new WeakMap;return(s=function(e,n){if(!n&&e&&e.__esModule)return e;var s,o,l={__proto__:null,default:e};if(null===e||"object"!=t(e)&&"function"!=typeof e)return l;if(s=n?a:r){if(s.has(e))return s.get(e);s.set(e,l)}for(var i in e)"default"!==i&&({}).hasOwnProperty.call(e,i)&&((o=(s=Object.defineProperty)&&Object.getOwnPropertyDescriptor(e,i))&&(o.get||o.set)?s(l,i,o):l[i]=e[i]);return l})(e,n)}function o(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var r=null==e?null:"u">typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var t,a,s,o,l=[],i=!0,c=!1;try{if(s=(r=r.call(e)).next,0===n){if(Object(r)!==r)return;i=!1}else for(;!(i=(t=s.call(r)).done)&&(l.push(t.value),l.length!==n);i=!0);}catch(e){c=!0,a=e}finally{try{if(!i&&null!=r.return&&(o=r.return(),Object(o)!==o))return}finally{if(c)throw a}}return l}}(e,n)||function(e,n){if(e){if("string"==typeof e)return l(e,n);var r=({}).toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?l(e,n):void 0}}(e,n)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,n){(null==n||n>e.length)&&(n=e.length);for(var r=0,t=Array(n);r<n;r++)t[r]=e[r];return t}n.exports.default=function(e){var n=e.taskId,r=e.onComplete,t=e.onError,s=o((0,a.useState)(null),2),l=s[0],i=s[1],c=o((0,a.useState)(!1),2),u=(c[0],c[1]),d=o((0,a.useState)(null),2),p=d[0],f=d[1];if((0,a.useEffect)(function(){if(n){var e=new EventSource("/api/research/".concat(n,"/progress"));return e.onopen=function(){u(!0),f(null)},e.onmessage=function(n){try{var a=JSON.parse(n.data);if(a.error){f(a.error),t&&t(a.error);return}if("heartbeat"===a.type)return;i(a),"completed"===a.status&&(r&&r(a),e.close())}catch(e){console.error("Error parsing progress data:",e),f("Failed to parse progress data")}},e.onerror=function(e){console.error("EventSource error:",e),u(!1),f("Connection lost"),t&&t("Connection lost")},function(){e.close(),u(!1)}}},[n,r,t]),!l)return a.default.createElement("div",{className:"research-progress loading"},a.default.createElement("div",{className:"progress-spinner"}),a.default.createElement("p",null,"Connecting to research session..."));var m=Math.round(l.progress||0);return a.default.createElement("div",{className:"research-progress"},a.default.createElement("div",{className:"progress-header"},a.default.createElement("h3",null,"Research Progress"),a.default.createElement("div",{className:"status-indicator ".concat(l.status)},a.default.createElement("span",{className:"status-dot ".concat(l.status)}),"running"===l.status?"Running":"completed"===l.status?"Completed":"Error")),a.default.createElement("div",{className:"progress-bar-container"},a.default.createElement("div",{className:"progress-bar"},a.default.createElement("div",{className:"progress-fill",style:{width:"".concat(m,"%")}})),a.default.createElement("span",{className:"progress-text"},m,"%")),a.default.createElement("div",{className:"progress-details"},a.default.createElement("div",{className:"detail-row"},a.default.createElement("span",{className:"label"},"Phase:"),a.default.createElement("span",{className:"value"},l.phase||"Initializing")),a.default.createElement("div",{className:"detail-row"},a.default.createElement("span",{className:"label"},"Topics:"),a.default.createElement("span",{className:"value"},l.topics_completed||0," / ",l.total_topics||0)),a.default.createElement("div",{className:"detail-row"},a.default.createElement("span",{className:"label"},"Findings:"),a.default.createElement("span",{className:"value"},l.findings_count||0)),l.start_time&&a.default.createElement("div",{className:"detail-row"},a.default.createElement("span",{className:"label"},"Started:"),a.default.createElement("span",{className:"value"},new Date(l.start_time).toLocaleTimeString()))),p&&a.default.createElement("div",{className:"progress-error"},a.default.createElement("span",{className:"error-icon"},"⚠️"),a.default.createElement("span",{className:"error-message"},p)),a.default.createElement("style",null,"\n        .research-progress {\n          background: var(--bg-primary);\n          border-radius: 8px;\n          padding: 20px;\n          box-shadow: 0 2px 10px var(--shadow);\n          margin: 20px 0;\n        }\n\n        .progress-header {\n          display: flex;\n          justify-content: space-between;\n          align-items: center;\n          margin-bottom: 20px;\n        }\n\n        .progress-header h3 {\n          margin: 0;\n          color: var(--text-primary);\n        }\n\n        .status-indicator {\n          display: flex;\n          align-items: center;\n          gap: 8px;\n          font-size: 14px;\n          font-weight: 500;\n        }\n\n        .status-dot {\n          width: 8px;\n          height: 8px;\n          border-radius: 50%;\n        }\n\n        .status-dot.running {\n          background: var(--accent);\n          animation: pulse 2s infinite;\n        }\n\n        .status-dot.completed {\n          background: var(--success);\n        }\n\n        .status-dot.error {\n          background: var(--error);\n        }\n\n        @keyframes pulse {\n          0% { opacity: 1; }\n          50% { opacity: 0.5; }\n          100% { opacity: 1; }\n        }\n\n        .progress-bar-container {\n          display: flex;\n          align-items: center;\n          gap: 10px;\n          margin-bottom: 20px;\n        }\n\n        .progress-bar {\n          flex: 1;\n          height: 20px;\n          background: var(--bg-tertiary);\n          border-radius: 10px;\n          overflow: hidden;\n        }\n\n        .progress-fill {\n          height: 100%;\n          background: linear-gradient(90deg, var(--accent), #0056b3);\n          transition: width 0.3s ease;\n        }\n\n        .progress-text {\n          font-weight: 600;\n          color: var(--accent);\n          min-width: 45px;\n        }\n\n        .progress-details {\n          display: grid;\n          grid-template-columns: 1fr 1fr;\n          gap: 10px 20px;\n          margin-bottom: 15px;\n        }\n\n        .detail-row {\n          display: flex;\n          justify-content: space-between;\n          align-items: center;\n        }\n\n        .label {\n          font-weight: 500;\n          color: var(--text-secondary);\n        }\n\n        .value {\n          font-weight: 600;\n          color: var(--text-primary);\n        }\n\n        .progress-error {\n          display: flex;\n          align-items: center;\n          gap: 8px;\n          padding: 10px;\n          background: rgba(220, 53, 69, 0.1);\n          border: 1px solid var(--error);\n          border-radius: 4px;\n          color: var(--error);\n        }\n\n        .loading {\n          text-align: center;\n          padding: 40px;\n        }\n\n        .progress-spinner {\n          width: 40px;\n          height: 40px;\n          border: 4px solid var(--bg-tertiary);\n          border-top: 4px solid var(--accent);\n          border-radius: 50%;\n          animation: spin 1s linear infinite;\n          margin: 0 auto 20px;\n        }\n\n        @keyframes spin {\n          0% { transform: rotate(0deg); }\n          100% { transform: rotate(360deg); }\n        }\n\n        @media (max-width: 768px) {\n          .progress-details {\n            grid-template-columns: 1fr;\n          }\n\n          .progress-header {\n            flex-direction: column;\n            align-items: flex-start;\n            gap: 10px;\n          }\n        }\n      "))}});
//# sourceMappingURL=ResearchProgress.52945ffb.js.map
