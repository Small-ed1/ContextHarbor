var e=globalThis.parcelRequire10c2,n=e.register;n("7nx9Q",function(n,t){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(n.exports,"__esModule",{value:!0}),n.exports.default=void 0;var a=s(e("acw62")),o=s(e("gC2yi")),i=e("2zAJi");function s(e,n){if("function"==typeof WeakMap)var t=new WeakMap,a=new WeakMap;return(s=function(e,n){if(!n&&e&&e.__esModule)return e;var o,i,s={__proto__:null,default:e};if(null===e||"object"!=r(e)&&"function"!=typeof e)return s;if(o=n?a:t){if(o.has(e))return o.get(e);o.set(e,s)}for(var l in e)"default"!==l&&({}).hasOwnProperty.call(e,l)&&((i=(o=Object.defineProperty)&&Object.getOwnPropertyDescriptor(e,l))&&(i.get||i.set)?o(s,l,i):s[l]=e[l]);return s})(e,n)}function l(){var e,n,t="function"==typeof Symbol?Symbol:{},r=t.iterator||"@@iterator",a=t.toStringTag||"@@toStringTag";function o(t,r,a,o){var l=Object.create((r&&r.prototype instanceof s?r:s).prototype);return c(l,"_invoke",function(t,r,a){var o,s,l,c=0,u=a||[],d=!1,f={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(n,t){return o=n,s=0,l=e,f.n=t,i}};function p(t,r){for(s=t,l=r,n=0;!d&&c&&!a&&n<u.length;n++){var a,o=u[n],p=f.p,m=o[2];t>3?(a=m===r)&&(l=o[(s=o[4])?5:(s=3,3)],o[4]=o[5]=e):o[0]<=p&&((a=t<2&&p<o[1])?(s=0,f.v=r,f.n=o[1]):p<m&&(a=t<3||o[0]>r||r>m)&&(o[4]=t,o[5]=r,f.n=m,s=0))}if(a||t>1)return i;throw d=!0,r}return function(a,u,m){if(c>1)throw TypeError("Generator is already running");for(d&&1===u&&p(u,m),s=u,l=m;(n=s<2?e:l)||!d;){o||(s?s<3?(s>1&&(f.n=-1),p(s,l)):f.n=l:f.v=l);try{if(c=2,o){if(s||(a="next"),n=o[a]){if(!(n=n.call(o,l)))throw TypeError("iterator result is not an object");if(!n.done)return n;l=n.value,s<2&&(s=0)}else 1===s&&(n=o.return)&&n.call(o),s<2&&(l=TypeError("The iterator does not provide a '"+a+"' method"),s=1);o=e}else if((n=(d=f.n<0)?l:t.call(r,f))!==i)break}catch(n){o=e,s=1,l=n}finally{c=1}}return{value:n,done:d}}}(t,a,o),!0),l}var i={};function s(){}function u(){}function d(){}n=Object.getPrototypeOf;var f=d.prototype=s.prototype=Object.create([][r]?n(n([][r]())):(c(n={},r,function(){return this}),n));function p(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,c(e,a,"GeneratorFunction")),e.prototype=Object.create(f),e}return u.prototype=d,c(f,"constructor",d),c(d,"constructor",u),u.displayName="GeneratorFunction",c(d,a,"GeneratorFunction"),c(f),c(f,a,"Generator"),c(f,r,function(){return this}),c(f,"toString",function(){return"[object Generator]"}),(l=function(){return{w:o,m:p}})()}function c(e,n,t,r){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}(c=function(e,n,t,r){function o(n,t){c(e,n,function(e){return this._invoke(n,t,e)})}n?a?a(e,n,{value:t,enumerable:!r,configurable:!r,writable:!r}):e[n]=t:(o("next",0),o("throw",1),o("return",2))})(e,n,t,r)}function u(e,n,t,r,a,o,i){try{var s=e[o](i),l=s.value}catch(e){return void t(e)}s.done?n(l):Promise.resolve(l).then(r,a)}function d(e){return function(){var n=this,t=arguments;return new Promise(function(r,a){var o=e.apply(n,t);function i(e){u(o,r,a,i,s,"next",e)}function s(e){u(o,r,a,i,s,"throw",e)}i(void 0)})}}function f(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"u">typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,a,o,i,s=[],l=!0,c=!1;try{if(o=(t=t.call(e)).next,0===n){if(Object(t)!==t)return;l=!1}else for(;!(l=(r=o.call(t)).done)&&(s.push(r.value),s.length!==n);l=!0);}catch(e){c=!0,a=e}finally{try{if(!l&&null!=t.return&&(i=t.return(),Object(i)!==i))return}finally{if(c)throw a}}return s}}(e,n)||function(e,n){if(e){if("string"==typeof e)return p(e,n);var t=({}).toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?p(e,n):void 0}}(e,n)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=Array(n);t<n;t++)r[t]=e[t];return r}var m=a.default.memo(function(e){var n,t,r,s,c=e.onSessionSelect,u=e.currentSessionId,p=f((0,a.useState)([]),2),m=p[0],h=p[1],v=f((0,a.useState)(!0),2),g=v[0],b=v[1],y=f((0,a.useState)(null),2),x=y[0],w=y[1],k=f((0,a.useState)(!1),2),E=k[0],N=k[1];(0,a.useEffect)(function(){S()},[E]);var S=(n=d(l().m(function e(){return l().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,b(!0),e.n=1,(0,i.cachedFetch)("/api/chats");case 1:h(e.v||[]),w(null),e.n=3;break;case 2:e.p=2,w(e.v.message);case 3:return e.p=3,b(!1),e.f(3);case 4:return e.a(2)}},e,null,[[0,2,3,4]])})),function(){return n.apply(this,arguments)}),O=(t=d(l().m(function e(){var n,t,r;return l().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,fetch("/api/chats",{method:"POST"});case 1:if((n=e.v).ok){e.n=2;break}throw Error("Failed to create session");case 2:return e.n=3,n.json();case 3:return t=e.v,c&&c(t.id),e.n=4,S();case 4:e.n=6;break;case 5:e.p=5,r=e.v,w("Failed to create session: ".concat(r.message));case 6:return e.a(2)}},e,null,[[0,5]])})),function(){return t.apply(this,arguments)}),j=(r=d(l().m(function e(n){var t;return l().w(function(e){for(;;)switch(e.p=e.n){case 0:if(confirm("Are you sure you want to archive this session?")){e.n=1;break}return e.a(2);case 1:return e.p=1,e.n=2,fetch("/api/chats/".concat(n,"/archive"),{method:"POST"});case 2:if(e.v.ok){e.n=3;break}throw Error("Failed to archive session");case 3:return e.n=4,S();case 4:e.n=6;break;case 5:e.p=5,t=e.v,w("Failed to archive session: ".concat(t.message));case 6:return e.a(2)}},e,null,[[1,5]])})),function(e){return r.apply(this,arguments)}),P=(s=d(l().m(function e(n){var t;return l().w(function(e){for(;;)switch(e.p=e.n){case 0:if(confirm("Are you sure you want to permanently delete this session? This action cannot be undone.")){e.n=1;break}return e.a(2);case 1:return e.p=1,e.n=2,fetch("/api/chats/".concat(n),{method:"DELETE"});case 2:if(e.v.ok){e.n=3;break}throw Error("Failed to delete session");case 3:return e.n=4,S();case 4:e.n=6;break;case 5:e.p=5,t=e.v,w("Failed to delete session: ".concat(t.message));case 6:return e.a(2)}},e,null,[[1,5]])})),function(e){return s.apply(this,arguments)}),_=function(e){if(!e)return"Unknown";var n=new Date(e),t=(new Date-n)/36e5;return t<24?n.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):t<168?n.toLocaleDateString([],{weekday:"short",hour:"2-digit",minute:"2-digit"}):n.toLocaleDateString()},A=function(e){if(e.summary)return e.summary;if(e.messages&&e.messages.length>0){var n=e.messages[e.messages.length-1];return n.content?n.content.substring(0,100)+"...":"Empty message"}return"New conversation"},T=m.filter(function(e){return E||!e.archived});return g?a.default.createElement("div",{className:"chat-sessions"},a.default.createElement("div",{className:"sessions-header"},a.default.createElement(o.default,{width:"150px",height:"1.2rem"}),a.default.createElement("div",{className:"header-actions"},a.default.createElement(o.default,{width:"100px",height:"2rem"}),a.default.createElement(o.default,{width:"100px",height:"2rem"}))),a.default.createElement("div",{className:"sessions-list"},Array.from({length:3},function(e,n){return a.default.createElement("div",{key:n,className:"session-item"},a.default.createElement("div",{className:"document-info"},a.default.createElement("div",{className:"session-title-row"},a.default.createElement(o.default,{width:"80%",height:"1rem"}),a.default.createElement("div",{className:"session-actions"},a.default.createElement(o.default,{width:"24px",height:"24px",variant:"circular"}),a.default.createElement(o.default,{width:"24px",height:"24px",variant:"circular"}))),a.default.createElement(o.SkeletonText,{lines:2,width:"100%"}),a.default.createElement("div",{className:"session-meta"},a.default.createElement(o.default,{width:"60px",height:"0.8rem"}))))}))):a.default.createElement("div",{className:"chat-sessions"},a.default.createElement("div",{className:"sessions-header"},a.default.createElement("h3",null,"Chat Sessions"),a.default.createElement("div",{className:"header-actions"},a.default.createElement("label",{className:"archive-toggle"},a.default.createElement("input",{type:"checkbox",checked:E,onChange:function(e){return N(e.target.checked)}}),"Show archived"),a.default.createElement("button",{onClick:O,className:"new-session-button"},"+ New Chat"))),x&&a.default.createElement("div",{className:"error-message"},a.default.createElement("span",{className:"error-icon"},"‚ö†Ô∏è"),a.default.createElement("span",null,x),a.default.createElement("button",{onClick:function(){return w(null)},className:"dismiss-error"},"√ó")),0===T.length?a.default.createElement("div",{className:"no-sessions"},a.default.createElement("p",null,E?"No archived sessions found.":"No chat sessions found."),a.default.createElement("p",null,"Start a new conversation to see it here.")):a.default.createElement("div",{className:"sessions-list"},T.map(function(e){return a.default.createElement("div",{key:e.id,className:"session-item ".concat(e.id===u?"active":""," ").concat(e.archived?"archived":""),onClick:function(){return c&&c(e.id)}},a.default.createElement("div",{className:"session-content"},a.default.createElement("div",{className:"session-title-row"},a.default.createElement("h4",{className:"session-title"},e.title||"Untitled Chat"),a.default.createElement("div",{className:"session-actions"},!e.archived&&a.default.createElement("button",{onClick:function(n){n.stopPropagation(),j(e.id)},className:"archive-button",title:"Archive session"},"üìÅ"),a.default.createElement("button",{onClick:function(n){n.stopPropagation(),P(e.id)},className:"delete-button",title:"Delete session"},"üóëÔ∏è"))),a.default.createElement("p",{className:"session-preview"},A(e)),a.default.createElement("div",{className:"session-meta"},a.default.createElement("span",{className:"session-date"},_(e.created_at)),e.archived&&a.default.createElement("span",{className:"archived-badge"},"Archived"))))})),a.default.createElement("style",null,'\n        .chat-sessions {\n          background: var(--bg-primary);\n          border-radius: 8px;\n          padding: 20px;\n          box-shadow: 0 2px 10px var(--shadow);\n          margin: 20px 0;\n        }\n\n        .sessions-header {\n          display: flex;\n          justify-content: space-between;\n          align-items: center;\n          margin-bottom: 20px;\n          flex-wrap: wrap;\n          gap: 15px;\n        }\n\n        .sessions-header h3 {\n          margin: 0;\n          color: var(--text-primary);\n        }\n\n        .header-actions {\n          display: flex;\n          align-items: center;\n          gap: 15px;\n        }\n\n        .archive-toggle {\n          display: flex;\n          align-items: center;\n          gap: 5px;\n          font-size: 14px;\n          color: var(--text-secondary);\n          cursor: pointer;\n        }\n\n        .archive-toggle input[type="checkbox"] {\n          margin: 0;\n        }\n\n        .new-session-button {\n          padding: 8px 16px;\n          background: var(--accent);\n          color: white;\n          border: none;\n          border-radius: 4px;\n          cursor: pointer;\n          font-size: 14px;\n          font-weight: 500;\n        }\n\n        .new-session-button:hover {\n          background: #0056b3;\n        }\n\n        .error-message {\n          display: flex;\n          align-items: center;\n          gap: 8px;\n          padding: 10px;\n          background: #f8d7da;\n          border: 1px solid #f5c6cb;\n          border-radius: 4px;\n          color: #721c24;\n          margin-bottom: 15px;\n        }\n\n        .dismiss-error {\n          margin-left: auto;\n          background: none;\n          border: none;\n          font-size: 18px;\n          cursor: pointer;\n          color: #721c24;\n        }\n\n        .no-sessions {\n          text-align: center;\n          padding: 40px;\n          color: #666;\n        }\n\n        .no-sessions p {\n          margin: 10px 0;\n        }\n\n        .sessions-list {\n          display: flex;\n          flex-direction: column;\n          gap: 10px;\n        }\n\n        .session-item {\n          border: 1px solid #e9ecef;\n          border-radius: 6px;\n          padding: 15px;\n          cursor: pointer;\n          transition: all 0.2s ease;\n          background: #f8f9fa;\n        }\n\n        .session-item:hover {\n          box-shadow: 0 2px 8px var(--shadow);\n        }\n\n        .session-item.selected {\n          border-color: var(--accent);\n        }\n\n        .session-item.active {\n          border-color: #007bff;\n          background: #e7f3ff;\n        }\n\n        .session-item.archived {\n          opacity: 0.7;\n          border-style: dashed;\n        }\n\n        .session-content {\n          width: 100%;\n        }\n\n        .session-title-row {\n          display: flex;\n          justify-content: space-between;\n          align-items: flex-start;\n          margin-bottom: 8px;\n        }\n\n        .session-title {\n          margin: 0 0 8px 0;\n          color: var(--text-primary);\n        }\n\n        .session-actions {\n          display: flex;\n          gap: 5px;\n          opacity: 0;\n          transition: opacity 0.2s ease;\n        }\n\n        .session-item:hover .session-actions {\n          opacity: 1;\n        }\n\n        .archive-button,\n        .delete-button {\n          background: none;\n          border: none;\n          cursor: pointer;\n          padding: 4px;\n          border-radius: 3px;\n          font-size: 14px;\n          transition: background-color 0.2s ease;\n        }\n\n        .archive-button:hover {\n          background: #e9ecef;\n        }\n\n        .delete-button:hover {\n          background: #f8d7da;\n        }\n\n        .session-preview {\n          margin: 0 0 8px 0;\n          color: #666;\n          font-size: 14px;\n          line-height: 1.4;\n          display: -webkit-box;\n          -webkit-line-clamp: 2;\n          -webkit-box-orient: vertical;\n          overflow: hidden;\n        }\n\n        .session-meta {\n          display: flex;\n          justify-content: space-between;\n          align-items: center;\n          font-size: 12px;\n        }\n\n        .session-date {\n          color: #999;\n        }\n\n        .archived-badge {\n          background: #ffc107;\n          color: #856404;\n          padding: 2px 6px;\n          border-radius: 10px;\n          font-size: 10px;\n          font-weight: 500;\n        }\n\n        .loading {\n          text-align: center;\n          padding: 40px;\n        }\n\n        .spinner {\n          width: 30px;\n          height: 30px;\n          border: 3px solid #f3f3f3;\n          border-top: 3px solid var(--accent);\n          border-radius: 50%;\n          animation: spin 1s linear infinite;\n          margin: 0 auto 15px;\n        }\n\n        @keyframes spin {\n          0% { transform: rotate(0deg); }\n          50% { transform: rotate(180deg); }\n          100% { transform: rotate(360deg); }\n        }\n\n        @media (max-width: 768px) {\n          .sessions-header {\n            flex-direction: column;\n            align-items: flex-start;\n          }\n\n          .header-actions {\n            width: 100%;\n            justify-content: space-between;\n          }\n\n          .session-title-row {\n            flex-direction: column;\n            gap: 10px;\n          }\n\n          .session-actions {\n            opacity: 1;\n            justify-content: flex-end;\n          }\n\n          .session-meta {\n            flex-direction: column;\n            align-items: flex-start;\n            gap: 5px;\n          }\n        }\n      '))});m.displayName="ChatSessions",n.exports.default=m}),n("gC2yi",function(n,t){Object.defineProperty(n.exports,"__esModule",{value:!0}),n.exports.default=n.exports.SkeletonText=n.exports.SkeletonTable=n.exports.SkeletonCard=n.exports.SkeletonButton=n.exports.SkeletonAvatar=void 0;var r,a=(r=e("acw62"))&&r.__esModule?r:{default:r},o=["lines","width"],i=["height"],s=["rows","columns"],l=["size"],c=["width"];function u(){return(u=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(null,arguments)}function d(e,n){if(null==e)return{};var t,r,a=function(e,n){if(null==e)return{};var t={};for(var r in e)if(({}).hasOwnProperty.call(e,r)){if(-1!==n.indexOf(r))continue;t[r]=e[r]}return t}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)t=o[r],-1===n.indexOf(t)&&({}).propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var f=function(e){var n=e.width,t=e.height,r=e.className,o=e.variant,i=e.animation,s={text:"skeleton-text",rectangular:"skeleton-rectangular",circular:"skeleton-circular",avatar:"skeleton-avatar"},l={pulse:"skeleton-pulse",wave:"skeleton-wave"},c=["skeleton",s[void 0===o?"text":o]||s.text,l[void 0===i?"pulse":i]||l.pulse,void 0===r?"":r].filter(Boolean).join(" ");return a.default.createElement("div",{className:c,style:{width:void 0===n?"100%":n,height:void 0===t?"1rem":t}})};n.exports.SkeletonText=function(e){var n=e.lines,t=void 0===n?1:n,r=e.width,i=void 0===r?"100%":r,s=d(e,o);return a.default.createElement("div",{className:"skeleton-text-block"},Array.from({length:t},function(e,n){return a.default.createElement(f,u({key:n,width:n===t-1?"60%":i,height:"1rem",variant:"text"},s))}))},n.exports.SkeletonCard=function(e){var n=e.height,t=d(e,i);return a.default.createElement("div",{className:"skeleton-card"},a.default.createElement(f,u({height:"2rem",width:"80%",className:"skeleton-card-title"},t)),a.default.createElement(f,u({height:void 0===n?"200px":n,variant:"rectangular",className:"skeleton-card-content"},t)),a.default.createElement("div",{className:"skeleton-card-footer"},a.default.createElement(f,u({width:"40%",height:"0.8rem"},t)),a.default.createElement(f,u({width:"30%",height:"0.8rem"},t))))},n.exports.SkeletonTable=function(e){var n=e.rows,t=e.columns,r=void 0===t?4:t,o=d(e,s);return a.default.createElement("div",{className:"skeleton-table"},a.default.createElement("div",{className:"skeleton-table-header"},Array.from({length:r},function(e,n){return a.default.createElement(f,u({key:n,height:"1.2rem",width:"100%"},o))})),Array.from({length:void 0===n?5:n},function(e,n){return a.default.createElement("div",{key:n,className:"skeleton-table-row"},Array.from({length:r},function(e,n){return a.default.createElement(f,u({key:n,height:"1rem",width:"100%"},o))}))}))},n.exports.SkeletonAvatar=function(e){var n=e.size,t=void 0===n?"40px":n,r=d(e,l);return a.default.createElement(f,u({width:t,height:t,variant:"circular"},r))},n.exports.SkeletonButton=function(e){var n=e.width,t=d(e,c);return a.default.createElement(f,u({width:void 0===n?"120px":n,height:"2.5rem",variant:"rectangular",className:"skeleton-button"},t))},n.exports.default=f});
//# sourceMappingURL=ChatSessions.1a0d6de0.js.map
